(this["webpackJsonpslider-ui-double-callback-problem"]=this["webpackJsonpslider-ui-double-callback-problem"]||[]).push([[0],{54:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var c=n(2),a=(n(54),n(5)),r=n(0),o=n.n(r),i=n(102),s=n(41);function u(){var e=Object(r.useState)(0),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 0."})," Typical Material-UI Slider component usage. value=",n]}),Object(c.jsx)(i.a,{min:-8,max:8,value:n,track:!1,onChange:function(e,t){"number"===typeof t&&o(t)}}),Object(c.jsx)(s.a,{paragraph:!0,children:"The problematic cases follow."})]})}function l(){var e,t=Object(r.useState)(0),n=Object(a.a)(t,2),o=n[0],u=n[1],l=Object(r.useState)(0),j=Object(a.a)(l,2),b=j[0],f=j[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 1."})," The problem appears. position=",o," velocity=",b]}),Object(c.jsx)(i.a,{min:-8,max:8,value:b,onChange:function(t,n){"number"===typeof n&&(f(n),void 0===e&&(e=window.setInterval((function(){u(o+b)}),250)))},onChangeCommitted:function(t,n){"number"===typeof n&&(f(0),void 0!==e&&(window.clearInterval(e),e=void 0))}})]})}function j(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=Object(r.useState)(0),m=Object(a.a)(f,2),d=m[0],p=m[1],O=Object(r.useState)(),x=Object(a.a)(O,2),h=x[0],v=x[1],g=0;return Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 2."})," Tip: (1) click the velocity=0, no move; (2) move the slider and how 'count' is captured. #timer=","".concat(h)," position=",j," velocity=",d]}),Object(c.jsx)(i.a,{min:-8,max:8,value:d,onChange:function(e,t){"number"===typeof t&&(v((function(e){return void 0!==e?void 0:window.setInterval((function(){o((function(e){return"callback ".concat(g++,"\n").concat(e)})),b(j+d)}),250)})),p(t))},onChangeCommitted:function(e,t){"number"===typeof t&&(p(0),v((function(e){window.clearInterval(e)})))}}),Object(c.jsx)("pre",{children:n})]})}function b(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=Object(r.useState)(0),m=Object(a.a)(f,2),d=m[0],p=m[1],O=Object(r.useState)(),x=Object(a.a)(O,2),h=x[0],v=x[1],g=0;return Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 3."})," Tip: click the velocity=0, no move. #timer=","".concat(h)," position=",j," velocity=",d]}),Object(c.jsx)(i.a,{min:-8,max:8,value:d,onChange:function(e,t){"number"===typeof t&&(p(t),v((function(e){return void 0!==e?void 0:window.setInterval((function(){o((function(e){return"callback ".concat(g++,"\n").concat(e)})),b(j+d)}),250)})))},onChangeCommitted:function(e,t){"number"===typeof t&&(p(0),v((function(e){window.clearInterval(e)})))}}),Object(c.jsx)("pre",{children:n})]})}function f(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=Object(r.useState)(0),m=Object(a.a)(f,2),d=m[0],p=m[1],O=Object(r.useReducer)((function(e,t){var n=e.offset,c=e.timer,a=e.counter,r=t.action,o=t.arg,i=t.delegate;switch(r){case"set-offset":return{offset:o,timer:c,counter:a};case"unset-offset":return{offset:0,timer:c,counter:a};case"create-timer-set-offset":return 0===c?{offset:o,timer:i(),counter:0}:{offset:o,timer:c,counter:a};case"destroy-timer-unset-offset":return i(c),{offset:0,timer:0,counter:a};case"count-up":return i(n,a),{offset:n,timer:c,counter:a+1};default:return{offset:n,timer:c,counter:a}}}),{offset:0,timer:0,counter:0}),x=Object(a.a)(O,2),h=x[0],v=x[1],g=function(){v({action:"count-up",delegate:function(e,t){o((function(n){return"update: offset ".concat(e," counter ").concat(t,"\n").concat(n)})),b((function(t){return t+e}))}})};return Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 4."})," Using ",Object(c.jsx)("code",{children:"useReducer"})," and suggested workarounds, but still (even more reproducible) with double timer creation. #timer=","".concat(h.timer)," position=",j," velocity=",d]}),Object(c.jsx)(i.a,{min:-8,max:8,value:d,onChange:function(e,t){"number"===typeof t&&(p(t),v({action:"create-timer-set-offset",arg:t,delegate:function(){var e=window.setInterval(g,250);return o((function(n){return"velocity: ".concat(t,"; setInterval result: ").concat(e,"\n").concat(n)})),e}}))},onChangeCommitted:function(e,t){"number"===typeof t&&(p(0),v({action:"destroy-timer-unset-offset",delegate:function(e){return window.clearInterval(e)}}))}}),Object(c.jsx)("pre",{children:n})]})}function m(){var e=Object(r.useState)(0),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=Object(r.useState)(!1),m=Object(a.a)(f,2),d=m[0],p=m[1];return Object(r.useEffect)((function(){if(d){var e=window.setInterval((function(){o((function(e){return e+j}))}),250);return function(){window.clearInterval(e)}}}),[j,d]),Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 5."})," Using ",Object(c.jsx)("code",{children:"useEffect"})," and cancel every loop when velocity changes. Thanks to @Kroisse in LangDev. No callback reaches when slider is moved fast (< 250 ms per change). position=",n," velocity=",j]}),Object(c.jsx)(i.a,{min:-8,max:8,value:j,onChange:function(e,t){"number"===typeof t&&(b(t),p(!0))},onChangeCommitted:function(e,t){"number"===typeof t&&(b(0),p(!1))}})]})}var d=n(28),p={position:0,velocity:0},O=function(e,t){switch(t.type){case"TICK":return Object(d.a)(Object(d.a)({},e),{},{position:e.position+e.velocity});case"SET_VELOCITY":return Object(d.a)(Object(d.a)({},e),{},{velocity:t.velocity});case"RESET_VELOCITIY":return Object(d.a)(Object(d.a)({},e),{},{velocity:0})}};function x(){var e=r.useReducer(O,p),t=Object(a.a)(e,2),n=t[0],o=t[1],u=0!==n.velocity;return r.useEffect((function(){var e=u&&window.setInterval((function(){o({type:"TICK"})}),100);return function(){e&&window.clearInterval(e)}}),[u]),Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 6."})," position=",n.position," velocity=",n.velocity]}),Object(c.jsx)(i.a,{min:-8,max:8,value:n.velocity,onChange:function(e,t){"number"===typeof t&&o({type:"SET_VELOCITY",velocity:t})},onChangeCommitted:function(){o({type:"RESET_VELOCITIY"})}})]})}function h(){var e=r.useState(0),t=Object(a.a)(e,2),n=t[0],o=t[1],u=r.useState(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=r.useState(0),m=Object(a.a)(f,2),d=m[0],p=m[1],O=r.useCallback((function(e){console.log("now: ".concat(e," last: ").concat(d," velocity: ").concat(j)),e<d+500||(o((function(e){return e+j})),p((function(e){return e+500})),0!==j&&window.requestAnimationFrame(O))}),[j,d]);return r.useEffect((function(){return 0!==j&&(p(performance.now()),O(performance.now())),function(){}}),[O,j]),Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 7."})," trying rAF (total failure). position=",n," velocity=",j]}),Object(c.jsx)(i.a,{min:-8,max:8,value:j,onChange:function(e,t){"number"===typeof t&&b(t)},onChangeCommitted:function(e,t){"number"===typeof t&&b(0)}})]})}function v(){var e=r.useState(0),t=Object(a.a)(e,2),n=t[0],o=t[1],u=r.useState(0),l=Object(a.a)(u,2),j=l[0],b=l[1],f=0!==j;return r.useEffect((function(){f&&window.requestAnimationFrame((function(){o((function(e){return e+j}))}))})),Object(c.jsxs)("div",{children:[Object(c.jsxs)(s.a,{paragraph:!0,children:[Object(c.jsx)("strong",{children:"Example 8."})," rAF. position=",n," velocity=",j]}),Object(c.jsx)(i.a,{min:-8,max:8,value:j,onChange:function(e,t){"number"===typeof t&&b(t)},onChangeCommitted:function(){b(0)}})]})}var g=n(44),w=n(8),y=n(94),C=n(96),E=n(95),S=n(100),I=n(98),T=n(101),k=n(99),F=n(97),L=Object(y.a)((function(e){return{root:{margin:0,padding:0,height:"100%"},appbar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},contentContainer:{paddingLeft:240},content:{flexGrow:1,padding:e.spacing(3)}}}));function N(){var e=L(),t=[{ref:"/example0",label:"Example 0",component:u},{ref:"/example1",label:"Example 1",component:l},{ref:"/example2",label:"Example 2",component:j},{ref:"/example3",label:"Example 3",component:b},{ref:"/example4",label:"Example 4",component:f},{ref:"/example5",label:"Example 5",component:m},{ref:"/example6",label:"Example 6",component:x},{ref:"/example7",label:"Example 7",component:h},{ref:"/example8",label:"Example 8",component:v}];return Object(c.jsx)("div",{className:e.root,children:Object(c.jsxs)(g.a,{children:[Object(c.jsx)(E.a,{}),Object(c.jsx)(C.a,{position:"fixed",className:e.appbar,children:Object(c.jsx)(F.a,{children:Object(c.jsx)(s.a,{variant:"h6",component:"h1",noWrap:!0,children:"Failure Demo"})})}),Object(c.jsxs)(S.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(c.jsx)(F.a,{}),Object(c.jsx)("div",{className:e.drawerContainer,children:Object(c.jsx)(I.a,{children:t.map((function(e){var t=e.ref,n=e.label;return Object(c.jsx)(T.a,{component:g.b,button:!0,to:t,children:Object(c.jsx)(k.a,{primary:n},t)},t)}))})})]}),Object(c.jsxs)("div",{className:e.contentContainer,children:[Object(c.jsx)(F.a,{}),Object(c.jsx)("main",{className:e.content,children:Object(c.jsxs)(w.d,{children:[Object(c.jsx)(w.a,{exact:!0,from:"/",to:"/example0"}),t.map((function(e){var t=e.ref,n=e.component;return Object(c.jsx)(w.b,{exact:!0,path:t,component:n})}))]})})]})]})})}var R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))},A=n(9);n.n(A).a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root")),R()}},[[63,1,2]]]);
//# sourceMappingURL=main.61f310ac.chunk.js.map