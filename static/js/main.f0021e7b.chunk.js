(this["webpackJsonpslider-ui-double-callback-problem"]=this["webpackJsonpslider-ui-double-callback-problem"]||[]).push([[0],{54:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(2),c=(n(54),n(5)),o=n(0),r=n.n(o),i=n(102),s=n(41);function l(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 0."})," Typical Material-UI Slider component usage. value=",n]}),Object(a.jsx)(i.a,{min:-8,max:8,value:n,track:!1,onChange:function(e,t){"number"===typeof t&&r(t)}}),Object(a.jsx)(s.a,{paragraph:!0,children:"The problematic cases follow."})]})}function u(){var e,t=Object(o.useState)(0),n=Object(c.a)(t,2),r=n[0],l=n[1],u=Object(o.useState)(0),f=Object(c.a)(u,2),j=f[0],p=f[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 1."})," The problem appears. position=",r," velocity=",j]}),Object(a.jsx)(i.a,{min:-8,max:8,value:j,onChange:function(t,n){"number"===typeof n&&(p(n),void 0===e&&(e=window.setInterval((function(){l(r+j)}),250)))},onChangeCommitted:function(t,n){"number"===typeof n&&(p(0),void 0!==e&&(window.clearInterval(e),e=void 0))}})]})}function f(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=Object(o.useState)(0),b=Object(c.a)(p,2),m=b[0],d=b[1],O=Object(o.useState)(),v=Object(c.a)(O,2),h=v[0],x=v[1],g=0;return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 2."})," Tip: (1) click the velocity=0, no move; (2) move the slider and how 'count' is captured. #timer=","".concat(h)," position=",f," velocity=",m]}),Object(a.jsx)(i.a,{min:-8,max:8,value:m,onChange:function(e,t){"number"===typeof t&&(x((function(e){return void 0!==e?void 0:window.setInterval((function(){r((function(e){return"callback ".concat(g++,"\n").concat(e)})),j(f+m)}),250)})),d(t))},onChangeCommitted:function(e,t){"number"===typeof t&&(d(0),x((function(e){window.clearInterval(e)})))}}),Object(a.jsx)("pre",{children:n})]})}function j(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=Object(o.useState)(0),b=Object(c.a)(p,2),m=b[0],d=b[1],O=Object(o.useState)(),v=Object(c.a)(O,2),h=v[0],x=v[1],g=0;return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 3."})," Tip: click the velocity=0, no move. #timer=","".concat(h)," position=",f," velocity=",m]}),Object(a.jsx)(i.a,{min:-8,max:8,value:m,onChange:function(e,t){"number"===typeof t&&(d(t),x((function(e){return void 0!==e?void 0:window.setInterval((function(){r((function(e){return"callback ".concat(g++,"\n").concat(e)})),j(f+m)}),250)})))},onChangeCommitted:function(e,t){"number"===typeof t&&(d(0),x((function(e){window.clearInterval(e)})))}}),Object(a.jsx)("pre",{children:n})]})}function p(){var e=Object(o.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=Object(o.useState)(0),b=Object(c.a)(p,2),m=b[0],d=b[1],O=Object(o.useReducer)((function(e,t){var n=e.offset,a=e.timer,c=e.counter,o=t.action,r=t.arg,i=t.delegate;switch(o){case"set-offset":return{offset:r,timer:a,counter:c};case"unset-offset":return{offset:0,timer:a,counter:c};case"create-timer-set-offset":return 0===a?{offset:r,timer:i(),counter:0}:{offset:r,timer:a,counter:c};case"destroy-timer-unset-offset":return i(a),{offset:0,timer:0,counter:c};case"count-up":return i(n,c),{offset:n,timer:a,counter:c+1};default:return{offset:n,timer:a,counter:c}}}),{offset:0,timer:0,counter:0}),v=Object(c.a)(O,2),h=v[0],x=v[1],g=function(){x({action:"count-up",delegate:function(e,t){r((function(n){return"update: offset ".concat(e," counter ").concat(t,"\n").concat(n)})),j((function(t){return t+e}))}})};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 4."})," Using ",Object(a.jsx)("code",{children:"useReducer"})," and suggested workarounds, but still (even more reproducible) with double timer creation. #timer=","".concat(h.timer)," position=",f," velocity=",m]}),Object(a.jsx)(i.a,{min:-8,max:8,value:m,onChange:function(e,t){"number"===typeof t&&(d(t),x({action:"create-timer-set-offset",arg:t,delegate:function(){var e=window.setInterval(g,250);return r((function(n){return"velocity: ".concat(t,"; setInterval result: ").concat(e,"\n").concat(n)})),e}}))},onChangeCommitted:function(e,t){"number"===typeof t&&(d(0),x({action:"destroy-timer-unset-offset",delegate:function(e){return window.clearInterval(e)}}))}}),Object(a.jsx)("pre",{children:n})]})}function b(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=Object(o.useState)(!1),b=Object(c.a)(p,2),m=b[0],d=b[1];return Object(o.useEffect)((function(){if(m){var e=window.setInterval((function(){r((function(e){return e+f}))}),250);return function(){window.clearInterval(e)}}}),[f,m]),Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 5."})," Using ",Object(a.jsx)("code",{children:"useEffect"})," and cancel every loop when velocity changes. Thanks to @Kroisse in LangDev. No callback reaches when slider is moved fast (< 250 ms per change). position=",n," velocity=",f]}),Object(a.jsx)(i.a,{min:-8,max:8,value:f,onChange:function(e,t){"number"===typeof t&&(j(t),d(!0))},onChangeCommitted:function(e,t){"number"===typeof t&&(j(0),d(!1))}})]})}var m=n(14),d={position:0,velocity:0},O=function(e,t){switch(t.type){case"TICK":return Object(m.a)(Object(m.a)({},e),{},{position:e.position+e.velocity});case"SET_VELOCITY":return Object(m.a)(Object(m.a)({},e),{},{velocity:t.velocity});case"RESET_VELOCITIY":return Object(m.a)(Object(m.a)({},e),{},{velocity:0})}};function v(){var e=o.useReducer(O,d),t=Object(c.a)(e,2),n=t[0],r=t[1],l=0!==n.velocity;return o.useEffect((function(){var e=l&&window.setInterval((function(){r({type:"TICK"})}),100);return function(){e&&window.clearInterval(e)}}),[l]),Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 6."})," position=",n.position," velocity=",n.velocity]}),Object(a.jsx)(i.a,{min:-8,max:8,value:n.velocity,onChange:function(e,t){"number"===typeof t&&r({type:"SET_VELOCITY",velocity:t})},onChangeCommitted:function(){r({type:"RESET_VELOCITIY"})}})]})}function h(){var e=o.useState(0),t=Object(c.a)(e,2),n=t[0],r=t[1],l=o.useState(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=o.useState(0),b=Object(c.a)(p,2),m=b[0],d=b[1],O=o.useCallback((function(e){console.log("now: ".concat(e," last: ").concat(m," velocity: ").concat(f)),e<m+500||(r((function(e){return e+f})),d((function(e){return e+500})),0!==f&&window.requestAnimationFrame(O))}),[f,m]);return o.useEffect((function(){return 0!==f&&(d(performance.now()),O(performance.now())),function(){}}),[O,f]),Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 7."})," trying rAF (total failure). position=",n," velocity=",f]}),Object(a.jsx)(i.a,{min:-8,max:8,value:f,onChange:function(e,t){"number"===typeof t&&j(t)},onChangeCommitted:function(e,t){"number"===typeof t&&j(0)}})]})}function x(){var e=o.useState(0),t=Object(c.a)(e,2),n=t[0],r=t[1],l=o.useState(0),u=Object(c.a)(l,2),f=u[0],j=u[1],p=0!==f;return o.useEffect((function(){p&&window.requestAnimationFrame((function(){r((function(e){return e+f}))}))})),Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 8."})," rAF. position=",n," velocity=",f]}),Object(a.jsx)(i.a,{min:-8,max:8,value:f,onChange:function(e,t){"number"===typeof t&&j(t)},onChangeCommitted:function(){j(0)}})]})}var g={committed:!0,offset:0,prevOffset:0,accumulated:0,prevUpdate:0,lastNotify:0};function w(e){!function(e){if("object"!==typeof e)return!1;var t=e.steps,n=e.behavior,a=e.durationMillisPerStep,c=e.onOffset}(e);var t=o.useState(g),n=Object(c.a)(t,2),r=n[0],s=n[1];return o.useEffect((function(){if(!r.committed){var t=window.requestAnimationFrame((function(t){var n=function(){switch(e.behavior){case"exponential":return r.offset>0?0+Math.pow(2,-1+r.offset):r.offset<0?0-Math.pow(2,-1-r.offset):0;case"linear":return r.offset}}();0===r.prevOffset&&s(Object(m.a)(Object(m.a)({},r),{},{prevOffset:r.offset,prevUpdate:t})),t<r.lastNotify+e.durationMillisPerStep?s((function(e){var a=e.committed,c=e.offset,o=e.prevOffset,r=e.accumulated,i=e.prevUpdate,s=e.lastNotify;return{committed:a,offset:c,prevOffset:o,accumulated:r+n*(t-i),prevUpdate:t,lastNotify:s}})):(s((function(a){var c=a.committed,o=a.offset,r=a.prevOffset,i=a.accumulated,s=a.prevUpdate,l=a.lastNotify;return{committed:c,offset:o,prevOffset:r,accumulated:i+n*(t-s-e.durationMillisPerStep),prevUpdate:t,lastNotify:l+e.durationMillisPerStep}})),e.onChange(n))}));return function(){window.cancelAnimationFrame(t)}}})),Object(a.jsx)(i.a,{track:!1,min:0-e.steps,max:0+e.steps,step:1,marks:[{value:0-e.steps,label:"\u25bc"},{value:-1,label:"\uff0d"},{value:0,label:"\u25c6"},{value:1,label:"\uff0b"},{value:0+e.steps,label:"\u25b2"}],value:r.offset,onChange:function(e,t){"number"===typeof t&&t!==r.offset&&(0===r.lastNotify?s(Object(m.a)(Object(m.a)({},Object(m.a)(Object(m.a)({},g),{},{committed:!1,prevUpdate:performance.now(),lastNotify:performance.now()})),{},{offset:t,prevOffset:r.offset})):s(Object(m.a)(Object(m.a)({},r),{},{offset:t,prevOffset:r.offset})))},onChangeCommitted:function(){console.log("onChangeCommit acc=".concat(r.accumulated," pU=").concat(r.prevUpdate," lN=").concat(r.lastNotify));var t=r.accumulated/e.durationMillisPerStep;e.onChange(Math.floor(t)),s(g)}})}function y(){var e=o.useState(0),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(s.a,{paragraph:!0,children:[Object(a.jsx)("strong",{children:"Example 9."})," rAF component. position=",n]}),Object(a.jsx)(w,{steps:8,behavior:"exponential",durationMillisPerStep:200,onChange:function(e){return r((function(t){return t+e}))}})]})}var C=n(44),S=n(8),E=n(94),I=n(96),T=n(95),N=n(100),k=n(98),F=n(101),U=n(99),M=n(97),P=Object(E.a)((function(e){return{root:{margin:0,padding:0,height:"100%"},appbar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},contentContainer:{paddingLeft:240},content:{flexGrow:1,padding:e.spacing(3)}}}));function L(){var e=P(),t=[{ref:"/example0",label:"Example 0",component:l},{ref:"/example1",label:"Example 1",component:u},{ref:"/example2",label:"Example 2",component:f},{ref:"/example3",label:"Example 3",component:j},{ref:"/example4",label:"Example 4",component:p},{ref:"/example5",label:"Example 5",component:b},{ref:"/example6",label:"Example 6",component:v},{ref:"/example7",label:"Example 7",component:h},{ref:"/example8",label:"Example 8",component:x},{ref:"/example9",label:"Example 9",component:y}];return Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(C.a,{children:[Object(a.jsx)(T.a,{}),Object(a.jsx)(I.a,{position:"fixed",className:e.appbar,children:Object(a.jsx)(M.a,{children:Object(a.jsx)(s.a,{variant:"h6",component:"h1",noWrap:!0,children:"Failure Demo"})})}),Object(a.jsxs)(N.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper},children:[Object(a.jsx)(M.a,{}),Object(a.jsx)("div",{className:e.drawerContainer,children:Object(a.jsx)(k.a,{children:t.map((function(e){var t=e.ref,n=e.label;return Object(a.jsx)(F.a,{component:C.b,button:!0,to:t,children:Object(a.jsx)(U.a,{primary:n},t)},t)}))})})]}),Object(a.jsxs)("div",{className:e.contentContainer,children:[Object(a.jsx)(M.a,{}),Object(a.jsx)("main",{className:e.content,children:Object(a.jsxs)(S.d,{children:[Object(a.jsx)(S.a,{exact:!0,from:"/",to:"/example0"}),t.map((function(e){var t=e.ref,n=e.component;return Object(a.jsx)(S.b,{exact:!0,path:t,component:n})}))]})})]})]})})}var A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))},R=n(9);n.n(R).a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),A()}},[[63,1,2]]]);
//# sourceMappingURL=main.f0021e7b.chunk.js.map